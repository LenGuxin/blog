<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue + typescript结合 | Home</title>
    <meta name="description" content="vue和typescript的结合使用">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="keywords" content="vue, typescript">
    <link rel="preload" href="/blog/assets/css/0.styles.dec1ee66.css" as="style"><link rel="preload" href="/blog/assets/js/app.730b6f49.js" as="script"><link rel="preload" href="/blog/assets/js/8.c06800f0.js" as="script"><link rel="preload" href="/blog/assets/js/3.a2044f09.js" as="script"><link rel="preload" href="/blog/assets/js/17.e8b56cd2.js" as="script"><link rel="preload" href="/blog/assets/js/20.b1c3b628.js" as="script"><link rel="preload" href="/blog/assets/js/13.4d0dbee5.js" as="script"><link rel="preload" href="/blog/assets/js/30.d367940f.js" as="script"><link rel="preload" href="/blog/assets/js/14.e65b9c14.js" as="script"><link rel="preload" href="/blog/assets/js/5.01d3b69c.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.194a1507.js"><link rel="prefetch" href="/blog/assets/js/11.bfac0f08.js"><link rel="prefetch" href="/blog/assets/js/12.6714044f.js"><link rel="prefetch" href="/blog/assets/js/15.88fff5e9.js"><link rel="prefetch" href="/blog/assets/js/16.7841ac8f.js"><link rel="prefetch" href="/blog/assets/js/18.85a6c91c.js"><link rel="prefetch" href="/blog/assets/js/19.58542b7c.js"><link rel="prefetch" href="/blog/assets/js/21.a2275d77.js"><link rel="prefetch" href="/blog/assets/js/22.f79c04e6.js"><link rel="prefetch" href="/blog/assets/js/23.271db04e.js"><link rel="prefetch" href="/blog/assets/js/24.52af40cd.js"><link rel="prefetch" href="/blog/assets/js/25.83d9979c.js"><link rel="prefetch" href="/blog/assets/js/26.4464543e.js"><link rel="prefetch" href="/blog/assets/js/27.11db7758.js"><link rel="prefetch" href="/blog/assets/js/28.cf3f3e06.js"><link rel="prefetch" href="/blog/assets/js/29.711602c8.js"><link rel="prefetch" href="/blog/assets/js/31.f46be53a.js"><link rel="prefetch" href="/blog/assets/js/32.0f97acca.js"><link rel="prefetch" href="/blog/assets/js/33.36287dde.js"><link rel="prefetch" href="/blog/assets/js/34.5b4c8007.js"><link rel="prefetch" href="/blog/assets/js/4.e082cd9a.js"><link rel="prefetch" href="/blog/assets/js/6.3a0e12a2.js"><link rel="prefetch" href="/blog/assets/js/7.15ce9a5d.js"><link rel="prefetch" href="/blog/assets/js/9.bc44c717.js"><link rel="prefetch" href="/blog/assets/js/vendors~flowchart.910cce35.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.dec1ee66.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme"><header class="navbar"><div class="nav-header"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/images/logo.jpg" class="logo"> <span class="site-name can-hide">
        Home
      </span></a> <nav class="nav-links can-hide"><ul class="nav-ul"><li class="nav-item"><a href="/blog/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/blog/about/" class="nav-link">About</a></li><li class="nav-item"><a href="/blog/tag/" class="nav-link">Tags</a></li><li class="nav-item"><a href="https://juejin.im/user/59032235b123db3ee46e9004/posts" target="_blank" rel="noopener noreferrer" class="nav-link">JueJin</a></li><li class="nav-item"><a href="https://github.com/LenGuxin" target="_blank" rel="noopener noreferrer" class="nav-link">Github</a></li></ul></nav> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header> <div class="sidebar-mask"></div> <!----> <div class="layout-container"><div class="main"><div class="layout-inner"><div class="card"><div class="content-header"><h1 class="page-title">vue + typescript结合</h1> <span class="page-timestamp">2019-04-30 12:00:00</span></div> <div class="content__default"><div class="pl-content"><p>💯 vue+typescript的基本使用
</p> <p>自尤大神去年9月推出vue对typescript的支持后，一直想开箱尝试vue+ts，最近一个新项目准备入手typescript，也遇到了很多坑，下面就一步步来吧！！！</p> <h2 id="_1-项目创建和初始化"><a href="#_1-项目创建和初始化" aria-hidden="true" class="header-anchor">#</a> 1. 项目创建和初始化</h2> <h3 id="_1-1-安装脚手架、创建项目"><a href="#_1-1-安装脚手架、创建项目" aria-hidden="true" class="header-anchor">#</a> 1.1 安装脚手架、创建项目</h3> <p>全局安装 vue-cli脚手架</p> <div class="language-js extra-class"><pre class="language-js"><code>$ npm install <span class="token operator">-</span>g @vue<span class="token operator">/</span>cli
</code></pre></div><p>等待安装完成后开始下一步，检查是否安装成功: Vue -v</p> <h3 id="_1-2-初始化项目"><a href="#_1-2-初始化项目" aria-hidden="true" class="header-anchor">#</a> 1.2. 初始化项目</h3> <div class="language-js extra-class"><pre class="language-js"><code>$ vue create vue<span class="token operator">-</span>ts
</code></pre></div><ol><li>选择预设的模板
<img src="https://user-gold-cdn.xitu.io/2019/4/30/16a6bdf5e89bc8d2?w=666&amp;h=191&amp;f=png&amp;s=6636" alt="An image">
选择更多功能 <code>Manully select features</code><br>
回车后来到选择插件</li> <li>选择插件<br>
这边选择了（Babel、Typescript、Router、Css预处理器、Linter / Formatter 格式检查、Unit测试框架）<br> <code>使用键盘空格选择插件</code> <img src="https://user-gold-cdn.xitu.io/2019/4/30/16a6be50d19434c7?w=474&amp;h=251&amp;f=png&amp;s=7121" alt="An image"></li> <li>自动检测typescript（yes）
<img src="https://user-gold-cdn.xitu.io/2019/4/30/16a6bed1eea7aaa1?w=564&amp;h=18&amp;f=png&amp;s=1453" alt="An image"></li> <li>路由模式选择<br>
是否使用 history模式的路由 （Yes）
<img src="https://user-gold-cdn.xitu.io/2019/4/30/16a6bee3cad31e82?w=881&amp;h=23&amp;f=png&amp;s=2265" alt="An image"></li> <li>选择一个css预处理器 (Sass/SCSS)
<img src="https://user-gold-cdn.xitu.io/2019/4/30/16a6bee874044778?w=878&amp;h=86&amp;f=png&amp;s=4325" alt="An image"></li> <li>选择格式检查规则（什么时候进行 tslint 校验: Line on save）
<img src="https://user-gold-cdn.xitu.io/2019/4/30/16a6bf064a05d085?w=834&amp;h=73&amp;f=png&amp;s=4476" alt="An image"></li> <li>是否保存这份预设配置？（yes）<br>
选是的话，下次创建一个vue项目，可以直接使用这个预设文件，而无需再进行新的配置，直接使用选择的模板创建项目</li></ol> <p>等待所有的依赖完成
<img src="https://user-gold-cdn.xitu.io/2019/4/30/16a6bf4d58956f4d?w=567&amp;h=378&amp;f=png&amp;s=425594" alt="An image"></p> <blockquote><p>通过node生产组件和页面是基于<code>lentoo</code>的<a href="https://juejin.im/post/5c4a6fcd518825469414e062#heading-7" target="_blank" rel="noopener noreferrer">vuecli3-project<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>基础上稍作更改</p></blockquote> <h3 id="_2-通过node来生成组件"><a href="#_2-通过node来生成组件" aria-hidden="true" class="header-anchor">#</a> 2. 通过node来生成组件</h3> <p>安装chalk</p> <div class="language-shell extra-class"><pre class="language-text"><code>$ npm install chalk --save-dev
</code></pre></div><p>在根目录中创建一个 scripts 文件夹，</p> <h4 id="_2-1-通过node来生成组件"><a href="#_2-1-通过node来生成组件" aria-hidden="true" class="header-anchor">#</a> 2.1. 通过node来生成组件</h4> <p>新增一个generateComponent.js文件，放置生成组件的代码、</p> <p>新增一个template.js文件，放置组件模板的代码
template.js文件</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">/**
 * 将驼峰命名转为中横杠例如：PlInputGroup --&gt; pl-input-group
 * @param str 
 */</span>
<span class="token keyword">function</span> <span class="token function">toMiddleLine</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> temp <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/[A-Z]/g</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> match<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'-'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果首字母是大写，执行replace时会多一个-，这里需要去掉</span>
    temp <span class="token operator">=</span> temp<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 首字母大写
 * @param {*} str 字符串
 * @returns
 */</span>
<span class="token keyword">function</span> <span class="token function">initialToUp</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token function-variable function">vueTemplate</span><span class="token punctuation">:</span> <span class="token parameter">componentName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`&lt;template&gt;
  &lt;div class=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">toMiddleLine</span><span class="token punctuation">(</span>componentName<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;
    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">toMiddleLine</span><span class="token punctuation">(</span>componentName<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot;&gt;
  import { Vue, Component, Prop, Watch, Emit, Provide, Inject } from 'vue-property-decorator'
  
  @Component({})
  export default class </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">initialToUp</span><span class="token punctuation">(</span>componentName<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> extends Vue {
    
  }
&lt;/script&gt;

&lt;style lang=&quot;scss&quot; scoped&gt;
// @import './style.scss';
.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">toMiddleLine</span><span class="token punctuation">(</span>componentName<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> {}
&lt;/style&gt;`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function-variable function">styleTemplate</span><span class="token punctuation">:</span> <span class="token parameter">componentName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">toMiddleLine</span><span class="token punctuation">(</span>componentName<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> {}`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
entryTemplate<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`import Main from './main.vue'
export default Main
`</span></span>
<span class="token punctuation">}</span>

</code></pre></div><p>generateComponent.js文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chalk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token operator">...</span>file<span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token parameter">message</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">successLog</span> <span class="token operator">=</span> <span class="token parameter">message</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">blue</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">errorLog</span> <span class="token operator">=</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> vueTemplate<span class="token punctuation">,</span> entryTemplate<span class="token punctuation">,</span> styleTemplate <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./template'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">generateFile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">errorLog</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">文件已存在`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">errorLog</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请输入要生成的组件名称、如需生成全局组件，请加 global/ 前缀'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> componentName <span class="token operator">=</span> <span class="token string">''</span>
process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inputName <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">/**
   * 组件目录路径
   */</span>
  <span class="token keyword">const</span> componentDirectory <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'../src/components'</span><span class="token punctuation">,</span> inputName<span class="token punctuation">)</span>

  <span class="token comment">/**
   * vue组件路径
   */</span>
  <span class="token keyword">const</span> componentVueName <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span>componentDirectory<span class="token punctuation">,</span> <span class="token string">'main.vue'</span><span class="token punctuation">)</span>
  <span class="token comment">/**
   * 入口文件路径
   */</span>
  <span class="token keyword">const</span> entryComponentName <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span>componentDirectory<span class="token punctuation">,</span> <span class="token string">'index.ts'</span><span class="token punctuation">)</span>
  <span class="token comment">/**
   * style样式路径
   */</span>
  <span class="token keyword">const</span> styleComponentName <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span>componentDirectory<span class="token punctuation">,</span> <span class="token string">'style.less'</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> hasComponentDirectory <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>componentDirectory<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hasComponentDirectory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">errorLog</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>inputName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">组件目录已存在，请重新输入`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`正在生成 component 目录 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>componentDirectory<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">dotExistDirectoryCreate</span><span class="token punctuation">(</span>componentDirectory<span class="token punctuation">)</span>
    <span class="token comment">// fs.mkdirSync(componentDirectory);</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>inputName<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> inputArr <span class="token operator">=</span> inputName<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
      componentName <span class="token operator">=</span> inputArr<span class="token punctuation">[</span>inputArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      componentName <span class="token operator">=</span> inputName
    <span class="token punctuation">}</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`正在生成 vue 文件 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>componentVueName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">generateFile</span><span class="token punctuation">(</span>componentVueName<span class="token punctuation">,</span> <span class="token function">vueTemplate</span><span class="token punctuation">(</span>componentName<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`正在生成 entry 文件 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entryComponentName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">generateFile</span><span class="token punctuation">(</span>entryComponentName<span class="token punctuation">,</span> entryTemplate<span class="token punctuation">)</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`正在生成 style 文件 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>styleComponentName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">generateFile</span><span class="token punctuation">(</span>styleComponentName<span class="token punctuation">,</span> <span class="token function">styleTemplate</span><span class="token punctuation">(</span>componentName<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">successLog</span><span class="token punctuation">(</span><span class="token string">'生成成功'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">errorLog</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'exit'</span><span class="token punctuation">)</span>
  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">dotExistDirectoryCreate</span> <span class="token punctuation">(</span><span class="token parameter">directory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">mkdirs</span><span class="token punctuation">(</span>directory<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 递归创建目录</span>
<span class="token keyword">function</span> <span class="token function">mkdirs</span> <span class="token punctuation">(</span><span class="token parameter">directory<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> exists <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>exists<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">mkdirs</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>配置package.json</p> <div class="language-shell extra-class"><pre class="language-text"><code>&quot;new:comp&quot;: &quot;node ./scripts/generateComponent&quot;
</code></pre></div><p>执行 npm / cnpm / yarn run new:comp 生成组件</p> <h4 id="_2-2-通过node来生成页面组件"><a href="#_2-2-通过node来生成页面组件" aria-hidden="true" class="header-anchor">#</a> 2.2. 通过node来生成页面组件</h4> <p>在scripts目录下新建一个generateView.js文件</p> <p>generateView.js文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chalk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token operator">...</span>file<span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token parameter">message</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">successLog</span> <span class="token operator">=</span> <span class="token parameter">message</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">blue</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">errorLog</span> <span class="token operator">=</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> vueTemplate <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./template'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">generateFile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">errorLog</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">文件已存在`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">errorLog</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请输入要生成的页面组件名称、会生成在 views/目录下'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> componentName <span class="token operator">=</span> <span class="token string">''</span>
process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inputName <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">/**
   * Vue页面组件路径
   */</span>
  <span class="token keyword">let</span> componentVueName <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'../src/views'</span><span class="token punctuation">,</span> inputName<span class="token punctuation">)</span>
  <span class="token comment">// 如果不是以 .vue 结尾的话，自动加上</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>componentVueName<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    componentVueName <span class="token operator">+=</span> <span class="token string">'.vue'</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * vue组件目录路径
   */</span>
  <span class="token keyword">const</span> componentDirectory <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>componentVueName<span class="token punctuation">)</span>

  <span class="token keyword">const</span> hasComponentExists <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>componentVueName<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hasComponentExists<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">errorLog</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>inputName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">页面组件已存在，请重新输入`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`正在生成 component 目录 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>componentDirectory<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">dotExistDirectoryCreate</span><span class="token punctuation">(</span>componentDirectory<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>inputName<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> inputArr <span class="token operator">=</span> inputName<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
      componentName <span class="token operator">=</span> inputArr<span class="token punctuation">[</span>inputArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      componentName <span class="token operator">=</span> inputName
    <span class="token punctuation">}</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`正在生成 vue 文件 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>componentVueName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">generateFile</span><span class="token punctuation">(</span>componentVueName<span class="token punctuation">,</span> <span class="token function">vueTemplate</span><span class="token punctuation">(</span>componentName<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">successLog</span><span class="token punctuation">(</span><span class="token string">'生成成功'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">errorLog</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'exit'</span><span class="token punctuation">)</span>
  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">dotExistDirectoryCreate</span> <span class="token punctuation">(</span><span class="token parameter">directory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">mkdirs</span><span class="token punctuation">(</span>directory<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 递归创建目录</span>
<span class="token keyword">function</span> <span class="token function">mkdirs</span> <span class="token punctuation">(</span><span class="token parameter">directory<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> exists <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>exists<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">mkdirs</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>配置package.json</p> <div class="language-shell extra-class"><pre class="language-text"><code>&quot;new:view&quot;: &quot;node ./scripts/generateView&quot;
</code></pre></div><p>执行 npm / cnpm / yarn run new:view 生成页面</p> <h3 id="_3-vue与typescript结合"><a href="#_3-vue与typescript结合" aria-hidden="true" class="header-anchor">#</a> 3. vue与typescript结合</h3> <h4 id="_3-1-首先组件声明"><a href="#_3-1-首先组件声明" aria-hidden="true" class="header-anchor">#</a> 3.1. 首先组件声明</h4> <p>若对vue-property-decorator库不了解的，请点击<a href="https://github.com/kaorun343/vue-property-decorator" target="_blank" rel="noopener noreferrer">vue-property-decorator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的了解更多</p> <p>创建组件如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Prop<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Watch<span class="token punctuation">,</span> Emit<span class="token punctuation">,</span> Provide<span class="token punctuation">,</span> Inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span>
  @Component
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h4 id="_3-2-data定义"><a href="#_3-2-data定义" aria-hidden="true" class="header-anchor">#</a> 3.2. data定义</h4> <p>若对ts的基本类型不了解的, 请点击 <a href="https://www.tslang.cn/docs/handbook/basic-types.html" target="_blank" rel="noopener noreferrer">typescript中文文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">private</span> listTotal<span class="token punctuation">:</span> number <span class="token operator">=</span> <span class="token number">50</span>
  <span class="token keyword">private</span> form<span class="token punctuation">:</span> any <span class="token operator">=</span> <span class="token punctuation">{</span>
    addText<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    addTextarea<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    text<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    textarea<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    imgUrl<span class="token punctuation">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-3-props声明"><a href="#_3-3-props声明" aria-hidden="true" class="header-anchor">#</a> 3.3 props声明</h4> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// align justify 弹性布局对齐方式</span>
  @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> align<span class="token operator">!</span><span class="token punctuation">:</span> string
  @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'flex-start'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> justify<span class="token operator">!</span><span class="token punctuation">:</span> string
  <span class="token comment">// 千万不要这样定义 @Prop private align: string = 'center' ---&gt; 踩</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h4 id="_3-4-vue生命周期及自定义方法"><a href="#_3-4-vue生命周期及自定义方法" aria-hidden="true" class="header-anchor">#</a> 3.4 vue生命周期及自定义方法</h4> <p>methods不需要像vue里面 methods: { text () {return console.log(222)} }</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">public</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  
  <span class="token keyword">public</span> <span class="token function">handleClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// methods定义</span>
</code></pre></div><h4 id="_3-5-watch"><a href="#_3-5-watch" aria-hidden="true" class="header-anchor">#</a> 3.5 Watch</h4> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 监听路由变化</span>
  @<span class="token function">Watch</span><span class="token punctuation">(</span><span class="token string">'$route'</span><span class="token punctuation">)</span>
  <span class="token function">onRouteChanged</span><span class="token punctuation">(</span>route<span class="token punctuation">:</span> any<span class="token punctuation">,</span> oldRoute<span class="token punctuation">:</span> any<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">,</span> oldRoute<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-6-computed"><a href="#_3-6-computed" aria-hidden="true" class="header-anchor">#</a> 3.6 computed</h4> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">msg</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token string">'from typescript'</span>
 <span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-7-emit"><a href="#_3-7-emit" aria-hidden="true" class="header-anchor">#</a> 3.7 Emit</h4> <div class="language-js extra-class"><pre class="language-js"><code>  @<span class="token function">Emit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token function">methodName</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> number<span class="token punctuation">,</span> y<span class="token punctuation">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'child to parent a value'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="_5-踩坑"><a href="#_5-踩坑" aria-hidden="true" class="header-anchor">#</a> 5. 踩坑</h3> <h4 id="_5-1-tinymac富文本编辑器的结合ts的使用，tiny中文文档"><a href="#_5-1-tinymac富文本编辑器的结合ts的使用，tiny中文文档" aria-hidden="true" class="header-anchor">#</a> 5.1 tinymac富文本编辑器的结合ts的使用，<a href="http://tinymce.ax-z.cn/" target="_blank" rel="noopener noreferrer">tiny中文文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>引入tinymac的时候，会报错
<img src="https://user-gold-cdn.xitu.io/2019/4/30/16a6c2c1338ece89?w=1268&amp;h=160&amp;f=png&amp;s=25076" alt="An image"></p> <p>解决方法：src目录下面新建一个shims-tinymce.d.ts文件</p> <div class="language-js extra-class"><pre class="language-js"><code>declare module <span class="token string">'tinymce/tinymce'</span>
</code></pre></div><p>重新启动项目就ok了</p> <h4 id="_5-2-主题、样式、语言配置"><a href="#_5-2-主题、样式、语言配置" aria-hidden="true" class="header-anchor">#</a> 5.2 主题、样式、语言配置</h4> <ol><li>主题</li></ol> <p>引入主题报错import 'tinymce/themes/modern/theme'</p> <p>可以使用sliver主题</p> <div class="language- extra-class"><pre class="language-text"><code>   import 'tinymce/themes/silver/theme'
</code></pre></div><ol start="2"><li>样式及语言汉化</li></ol> <p>在public目录新建的static文件</p> <p>2.1 将node_modules/tinymce/skins文件拷贝到static中</p> <p>2.2 <a href="http://tinymce.ax-z.cn/static/tiny/langs/zh_CN.js" target="_blank" rel="noopener noreferrer">zh_CN.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 下载，拷贝到static文件中</p> <p><img src="https://user-gold-cdn.xitu.io/2019/4/30/16a6c341f445d1bd?w=222&amp;h=88&amp;f=png&amp;s=2587" alt="An image"></p> <h4 id="_5-3-引入主题，样式，语言包"><a href="#_5-3-引入主题，样式，语言包" aria-hidden="true" class="header-anchor">#</a> 5.3 引入主题，样式，语言包</h4> <p>配置如下</p> <div class="language- extra-class"><pre class="language-text"><code>public editorInit: any = {
    language_url: '/static/zh_CN.js',
    language: 'zh_CN',
    selector: 'textarea',
    skin_url: '/static/skins/ui/oxide',
    height: 300,
    browser_spellcheck: true, // 拼写检查
    branding: false, // 去水印
    // elementpath: false,  //禁用编辑器底部的状态栏
    statusbar: false, // 隐藏编辑器底部的状态栏
    paste_data_images: true, // 允许粘贴图像
    plugins: setPlugins,
    toolbar: setToolbar,
    // 启用菜单栏并显示如下项 [文件 编辑 插入 格式 表格]
    menubar: 'file edit insert view format table',
    // 配置每个菜单栏的子菜单项（如下是默认配置）
    menu: {
      file: {
        title: 'File',
        items: 'newdocument'
      },
      edit: {
        title: 'Edit',
        items: 'undo redo | cut copy paste pastetext | selectall'
      },
      insert: {
        title: 'Insert',
        items: 'link media | template hr'
      },
      view: {
        title: 'View',
        items: 'visualaid'
      },
      format: {
        title: 'Format',
        items: 'bold italic underline strikethrough superscript subscript | formats | removeformat'
      },
      table: {
        title: 'Table',
        items: 'inserttable tableprops deletetable | cell row column'
      }
    },
    // 覆盖默认的字体单位为pt
    fontsize_formats: '8px 10px 12px 14px 16px 18px 20px 24px 36px',
    /**
     * 下面方法是为tinymce添加自定义插入图片按钮
     * 也可以借助elementui的Upload组件，上传图片
     */
    images_upload_url: '/api/image', // 上传图片接口地址
    images_upload_handler: (blobInfo: any, success: any, failure: any) =&gt; {
      let xhr: any = null
      let formData: any = null
      xhr = new XMLHttpRequest()
      xhr.withCredentials = false
      xhr.open('POST', this.$store.state.imgUrl)
      xhr.onload = () =&gt; {
        if (xhr.status &lt; 200 || xhr.status &gt;= 300) {
          failure(xhr.status)
          return
        }
        let json = JSON.parse(xhr.responseText)
        if (json.code === 0) {
          success(json.data[0].newFileName)
        } else {
          failure('HTTP Error: ' + json.msg)
        }
      }
      formData = new FormData()
      formData.append('file', blobInfo.blob(), blobInfo.filename())
      xhr.send(formData)
    }
  }
</code></pre></div><p>附上效果图：
<img src="https://user-gold-cdn.xitu.io/2019/4/30/16a6c40fac5dd493?w=660&amp;h=338&amp;f=png&amp;s=29358" alt="An image"></p> <h3 id="相关资源链接"><a href="#相关资源链接" aria-hidden="true" class="header-anchor">#</a> 相关资源链接</h3> <ol><li><a href="https://juejin.im/post/59c46bc86fb9a00a4636f939" target="_blank" rel="noopener noreferrer">TypeScript 体系调研报告<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://ts.xcatliu.com/" target="_blank" rel="noopener noreferrer">ts通俗易懂文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://tinymce.ax-z.cn/" target="_blank" rel="noopener noreferrer">ts中文文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/5c4a6fcd518825469414e062#heading-8" target="_blank" rel="noopener noreferrer">vue-cli3 项目从搭建优化到docker部署<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol></div></div> <div class="content page-nav"><p class="inner"><span class="prev">←
          <a href="/blog/blog/vue-component.html" class="prev">vue组件开发及文档说明，浅谈收获</a></span> <span class="next"><a href="/blog/blog/wepy-mini-program.html">wepy开发小程序</a>→
        </span></p></div></div> <!----></div> <div class="tool-group"><!----></div></div></div> <footer class="footer"><span>death is our final destination. enjoy the journey</span></footer></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.730b6f49.js" defer></script><script src="/blog/assets/js/8.c06800f0.js" defer></script><script src="/blog/assets/js/3.a2044f09.js" defer></script><script src="/blog/assets/js/17.e8b56cd2.js" defer></script><script src="/blog/assets/js/20.b1c3b628.js" defer></script><script src="/blog/assets/js/13.4d0dbee5.js" defer></script><script src="/blog/assets/js/30.d367940f.js" defer></script><script src="/blog/assets/js/14.e65b9c14.js" defer></script><script src="/blog/assets/js/5.01d3b69c.js" defer></script>
  </body>
</html>
